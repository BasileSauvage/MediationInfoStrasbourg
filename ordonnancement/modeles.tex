\documentclass[dvipsnames]{article}

\usepackage[a4paper, margin=.5cm]{geometry}

\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{calc}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%
% Longueur unité
\newlength{\base}
\setlength{\base}{2cm}
% Largeur baguette
\newlength{\largb}
\setlength{\largb}{18mm}
%\def\base{2cm}
%%%%%%%%%%%%%%%%%%%%%%%

% Hauteur d'un rectangle
\def\height{-\largb}
% Espace horizontal entre deux rectangles
\def\paddingX{.5*\base}
% Espace vertical entre deux rectangles
\def\paddingY{-.3*\largb}
% Hauteur d'une icône
\def\iconHeight{.6\largb}
\def\smallIconHeight{.2\largb}
% Longeur d'un rectangle
\newcommand{\length}[1]{ #1*\base }
% Coordonnée de départ d'un rectangle selon Y
\newcommand{\startY}[1]{ #1*\height+#1*\paddingY }

%%%%%%%%%%%%%%%%%%%%%%%
% Tracé d'un couple de rectcangles
% param1 : longeur du rectangel 1 (en nombre d'unité)
% param2 : longeur du rectangle 2 (en nombre d'unité)
% param3 : couleur
% param4 : ordre vertical
%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\Duo}[5]{%
  % 1er rectangle de la paire
  \fill[#3] (0,                                 \startY{#4})%
            rectangle%
            (\length{#1},                       \startY{#4}+\height);%
  Icône du 1er rectangle de la paire
  \node (icona#4) at%
    (.5*\length{#1},%
     \startY{#4}+.5*\height)%
  {\includegraphics[height=\iconHeight]{#5}};%
  \node (toque#4) at%
    (0.3*\paddingX,%
     \startY{#4}+.15*\height)%
  {\includegraphics[height=\smallIconHeight]{icons/toque.png}};%

  % 2ème rectangle de la paire
  \fill[#3] (\length{#1}+\paddingX,             \startY{#4})%
            rectangle%
            (\length{#1}+\paddingX+\length{#2}, \startY{#4}+\height);%
  % Icône du 2ème rectangle de la paire
   \node (iconnb#4) at%
     (\length{#1}+\paddingX+.3*\paddingX,%
     \startY{#4}+.15*\height)%
   {\includegraphics[height=\smallIconHeight]{icons/four.png}};%
  \node (iconnb#4) at%
    (\length{#1}+\paddingX+.5*\length{#2},%
     \startY{#4}+.5*\height)%
  {\includegraphics[height=\iconHeight]{#5}};%
}

\newcommand{\Legende}[1]{%
\begin{tikzpicture}%
\fill [lightgray] (0,0) rectangle (\largb,\largb);%
\node (iconf) at%
     (0.5\largb,0.5\largb)%
   {\includegraphics[height=\iconHeight]{#1}};%
\end{tikzpicture}%
}

\definecolor{ColorPain}{HTML}{80D3E4}
\definecolor{ColorCroissant}{HTML}{ABE480}
\definecolor{ColorBrioche}{HTML}{B180E4}
\newcommand{\Pain}[1]{\Duo{1}{2}{ColorPain}{#1}{icons/pain.png}}
\newcommand{\Croissant}[1]{\Duo{2}{5}{ColorCroissant}{#1}{icons/croissant.png}}
\newcommand{\Brioche}[1]{\Duo{3}{4}{ColorBrioche}{#1}{icons/brioche.png}}

\definecolor{ColorTarteFlambee}{HTML}{80D3E4}
\definecolor{ColorBretzel}{HTML}{E4808C}
\definecolor{ColorJambonneau}{HTML}{E4C580}
\newcommand{\TarteFlambee}[1]{\Duo{2}{1}{ColorTarteFlambee}{#1}{icons/tarteflambee.png}}
\newcommand{\Bretzel}[1]{\Duo{5}{3}{ColorBretzel}{#1}{icons/bretzel.png}}
\newcommand{\Jambonneau}[1]{\Duo{4}{4}{ColorJambonneau}{#1}{icons/jambonneau.png}}

\definecolor{ColorPoisson}{HTML}{FF69DB}
\definecolor{ColorPoulet}{HTML}{BCD500}
\definecolor{ColorGateau}{HTML}{B67026}
\newcommand{\Poisson}[1]{\Duo{3}{1}{ColorPoisson}{#1}{icons/poisson.png}}
\newcommand{\Poulet}[1]{\Duo{6}{2}{ColorPoulet}{#1}{icons/poulet.png}}
\newcommand{\Gateau}[1]{\Duo{4}{5}{ColorGateau}{#1}{icons/gateau.png}}

\begin{tikzpicture}
  \Pain{0}
  \Croissant{1}
  \Brioche{2}

  \TarteFlambee{3}
  \Bretzel{4}
  \Jambonneau{5}

  \Poisson{6}
  \Poulet{7}
  \Gateau{8}
\end{tikzpicture}

\smallskip

\Legende{icons/four.png}
\Legende{icons/toque.png}
\Legende{icons/four.png}
\Legende{icons/toque.png}
\Legende{icons/four.png}
\Legende{icons/toque.png}
\Legende{icons/four.png}
\Legende{icons/toque.png}


\end{document}
